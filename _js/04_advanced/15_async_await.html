<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>async await keyword</title>
</head>
<body>
    <h1>
        promise 객체활용과 데이터 통신을 편리하게 할 수 있도록 제공되는 키워드
    </h1>
    <ul>
        <li>
            async 키워드 : 함수 선언 키워드(function)앞에 사용하면 그 함수의 리턴이 Promise 객체 타입으로 만들어 준다 
        </li>
        <li>
            await 키워드 : 순차적 실행에서 데이터 통신과 같은 지연로딩 및 지연실행 상황이 발생할 경우 코드실행 순서를 순차적으로 진행할 수 있도록 보증한다. 즉 이전 라인의 코드실행이 완료될 때까지 다음라인 실행을 기다리게 하는 기능
        </li>
    </ul>
    <h3>
        https://jsonplaceholder.typicode.com/  를 활용한 async await 연습
    </h3>
    <button type="button" id="btn">데이터 불러오기</button>
    
    <script>
        document.getElementById('btn').addEventListener('click',()=>{

          async function fetchAndAwait(){
            // 데이터 통싱상황에는 try catct 를 걸어야 함
            try {
                //fetch 는 js가 제공해주는 함수
                const resp =await fetch('https://jsonplaceholder.typicode.com/todos/1');
                // await를걸어야 데이터를 가져오는데 까지 기다린다
                const result =await resp.text();
                // await를걸어야 데이터를 text로 변환하는데 까지 기다린다
                console.log(result)
            } catch (error) {
                console.log('err')
            }finally{
                console.log('asunc finish')
            }
        }

        fetchAndAwait();
        });

    </script>
</body>
</html>